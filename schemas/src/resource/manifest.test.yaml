# yaml-language-server: $schema=https://json-schema.org/draft/2020-12/schema
$schema: https://json-schema.org/draft/2020-12/schema
$id:     <HOST>/<PREFIX>/<VERSION>/resource/manifest.test.yaml

title: Test Method
description: >-
  Defines how DSC must call the DSC Resource to test if an instance is in the desired state and how
  to process the output from the DSC Resource.
markdownDescription: | # VS Code only
  > [Online Documentation][01]

  Defines how DSC must call the DSC Resource to test if an instance is in the desired state and how
  to process the output from the DSC Resource.

  [01]: https://learn.microsoft.com/powershell/dsc/reference/schemas/resource/manifest/test?view=dsc-3.0&preserveView=true


type: object
required:
  - executable
  - input
properties:
  executable:
    $ref: /<PREFIX>/<VERSION>/definitions/commandExecutable.yaml
  args:
    $ref: /<PREFIX>/<VERSION>/definitions/commandArgs.yaml
  input:
    $ref: /<PREFIX>/<VERSION>/definitions/inputKind.yaml
  return:
    title: Test Command Return Type
    description: >-
      Defines whether the command returns a JSON blob of the DSC Resource's current state or the
      state and an array of the properties that are out of the desired state.
    $ref: /<PREFIX>/<VERSION>/definitions/returnKind.yaml
    # VS Code only
    markdownDescription: |
      > [Online Documentation][01]

      Defines whether the command returns a JSON blob of the DSC Resource's current state or the
      state and an array of the properties that are out of the desired state.

      [01]: https://learn.microsoft.com/powershell/dsc/reference/schemas/resource/manifest/test?view=dsc-3.0&preserveView=true#return
    markdownEnumDescriptions:
      # state
      - |
          Indicates that the resource returns only the instance's actual state.
      # stateAndDiff
      - |
          Indicates that the resource returns the instance's actual state and an array of property
          names that are out of the desired state.

examples:
  - executable: registry
    args:
      - config
      - test
    input:  stdin
    return: state
