# yaml-language-server: $schema=https://json-schema.org/draft/2020-12/schema
$schema: https://json-schema.org/draft/2020-12/schema
$id:     <HOST>/<PREFIX>/<VERSION>/resource/manifest.set.yaml

title: Set Method
description: >-
  Defines how DSC must call the DSC Resource to set the desired state of an instance and how to
  process the output from the DSC Resource.
markdownDescription: | # VS Code only
  > [Online Documentation][01]

  Defines how DSC must call the DSC Resource to set the desired state of an instance and how to
  process the output from the DSC Resource.

  [01]: https://learn.microsoft.com/powershell/dsc/reference/schemas/resource/manifest/set?view=dsc-3.0&preserveView=true

type: object
required:
  - executable
  - input
properties:
  executable:
    $ref: /<PREFIX>/<VERSION>/definitions/commandExecutable.yaml
  args:
    $ref: /<PREFIX>/<VERSION>/definitions/commandArgs.yaml
  input:
    $ref: /<PREFIX>/<VERSION>/definitions/inputKind.yaml
  preTest:
    title: Resource Performs Pre-Test
    description: >-
      Defines whether the DSC Resource performs its own test to ensure idempotency when calling the
      `set` command. Set this value to `true` if the DSC Resource tests input before modifying
      system state.
    type: boolean
    default: false
    # VS Code only
    markdownDescription: |
      > [Online Documentation][01]

      Defines whether the DSC Resource performs its own test to ensure idempotency when calling the
      `set` command. Set this value to `true` if the DSC Resource tests input before modifying
      system state.

      [01]: https://learn.microsoft.com/powershell/dsc/reference/schemas/resource/manifest/set?view=dsc-3.0&preserveView=true#pretest
  return:
    description: >-
      Defines whether the command returns a JSON blob of the DSC Resource's state after the set
      operation or the state and an array of the properties the DSC Resource modified.
    $ref: /<PREFIX>/<VERSION>/definitions/returnKind.yaml
    # VS Code only
    markdownDescription: |
      > [Online Documentation][01]

      Defines whether the command returns a JSON blob of the DSC Resource's state after the set
      operation or the state and an array of the properties the DSC Resource modified.

      [01]: https://learn.microsoft.com/powershell/dsc/reference/schemas/resource/manifest/set?view=dsc-3.0&preserveView=true#return
    markdownEnumDescriptions:
      # state
      - |
          Indicates that the resource returns only the instance's final state after the set
          operation as a JSON blob.
      # stateAndDiff
      - |
          Indicates that the resource returns the instance's final state and an array of property
          names that the resource modified.

examples:
  - executable: registry
    args:
      - config
      - set
    input:   stdin
    preTest: true
    return:  state
