{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.microsoft.com/dsc/2023/07/bundled/config.document.json",
  "title": "DSC Configuration Document schema",
  "description": "Describes a valid DSC Configuration Document.",
  "type": "object",
  "required": [
    "$schema",
    "resources"
  ],
  "properties": {
    "$schema": {
      "title": "Schema",
      "description": "This property must be the canonical URL of the DSC Configuration Document schema that the document is implemented for.",
      "type": "string",
      "format": "uri",
      "enum": [
        "https://schemas.microsoft.com/dsc/2023/07/config/document.json"
      ]
    },
    "parameters": {
      "title": "DSC Configuration document parameters",
      "description": "Defines runtime options for the configuration. Users and integrating tools can override use the defined parameters to pass alternate values to the configuration.",
      "type": "object",
      "additionalProperties": {
        "$ref": "#/$defs/dsc/2023/07/config/document.parameters.json"
      }
    },
    "variables": {
      "title": "Configuration variables",
      "description": "Defines a set of reusable values for the configuration document. The names of this value's properties are the strings used to reference a variable's value.",
      "type": "object"
    },
    "resources": {
      "title": "DSC Configuration document resources",
      "description": "Defines a list of DSC Resource instances for the configuration to manage.",
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "#/$defs/dsc/2023/07/config/document.resource.json"
      }
    },
    "metadata": {
      "title": "Configuration metadata",
      "description": "Defines a set of key-value pairs for the configuration. This metadata isn't validated.",
      "type": "object"
    }
  },
  "$defs": {
    "dsc": {
      "2023": {
        "07": {
          "config": {
            "document.resource.json": {
              "$schema": "https://json-schema.org/draft/2020-12/schema",
              "$id": "https://schemas.microsoft.com/dsc/2023/07/config/document.resource.json",
              "title": "DSC Resource instance",
              "type": "object",
              "required": [
                "type",
                "name"
              ],
              "properties": {
                "type": {
                  "$ref": "#/$defs/dsc/2023/07/definitions/resourceType.json"
                },
                "name": {
                  "$ref": "#/$defs/dsc/2023/07/definitions/instanceName.json"
                },
                "dependsOn": {
                  "title": "Instance depends on",
                  "description": "Defines a list of DSC Resource instances that DSC must successfully process before processing this instance. Each value for this property must be the value of another DSC Resource instance's `name` property.",
                  "type": "array",
                  "items": {
                    "type": "string",
                    "uniqueItems": true,
                    "pattern": "^\\[\\w+(\\.\\w+){0,2}\\/\\w+\\].+$"
                  }
                },
                "properties": {
                  "title": "Managed instance properties",
                  "description": "Defines the properties of the DSC Resource this instance manages. This property's value must be an object. DSC validates the property's value against the DSC Resource's schema.",
                  "type": "object"
                }
              }
            }
          },
          "definitions": {
            "resourceType.json": {
              "$schema": "https://json-schema.org/draft/2020-12/schema",
              "$id": "https://schemas.microsoft.com/dsc/2023/07/definitions/resourceType.json",
              "title": "DSC Resource fully qualified type name",
              "description": "The namespaced name of the DSC Resource, using the syntax:\n\nowner[.group][.area]/name\n\nFor example:\n\n  - Microsoft.SqlServer/Database\n  - Microsoft.SqlServer.Database/User\n",
              "type": "string",
              "pattern": "^\\w+(\\.\\w+){0,2}\\/\\w+$"
            },
            "instanceName.json": {
              "$schema": "https://json-schema.org/draft/2020-12/schema",
              "$id": "https://schemas.microsoft.com/dsc/2023/07/definitions/instanceName.json",
              "title": "Instance name",
              "description": "The short, human-readable name for a DSC Resource instance. Must be unique within a DSC Configuration document.",
              "type": "string"
            }
          }
        }
      }
    }
  }
}
